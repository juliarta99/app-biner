<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Operasi Aritmatika Biner</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="container py-4">
    <h2 class="text-center">Apa yang ingin anda lakukan?</h2>
    
    <div class="accordion mt-4" id="conversionAccordion">
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingBinaryToDecimal">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseBinaryToDecimal" aria-expanded="true" aria-controls="collapseBinaryToDecimal">
                    Konversi Biner ke Desimal
                </button>
            </h2>
            <div id="collapseBinaryToDecimal" class="accordion-collapse collapse show" aria-labelledby="headingBinaryToDecimal" data-bs-parent="#conversionAccordion">
                <div class="accordion-body">
                    <input type="text" class="form-control" id="binaryInput" placeholder="Masukkan bilangan biner" pattern="[01]*" oninput="validateBinaryInput(this)">
                    <button onclick="convertBinaryToDecimal()" class="btn btn-primary mt-3">Konversi</button>
                    <div class="mt-3" id="resultBinaryToDecimal"></div>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingDecimalToBinary">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDecimalToBinary" aria-expanded="false" aria-controls="collapseDecimalToBinary">
                    Konversi Desimal ke Biner
                </button>
            </h2>
            <div id="collapseDecimalToBinary" class="accordion-collapse collapse" aria-labelledby="headingDecimalToBinary" data-bs-parent="#conversionAccordion">
                <div class="accordion-body">
                    <input type="number" class="form-control" id="decimalInput" placeholder="Masukkan bilangan desimal" oninput="validateDecimalInput(this)">
                    <button onclick="convertDecimalToBinary()" class="btn btn-primary mt-3">Konversi</button>
                    <div class="mt-3" id="resultDecimalToBinary"></div>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingOperation">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOperation" aria-expanded="false" aria-controls="collapseOperation">
                    Operasi Aritmatika
                </button>
            </h2>
            <div id="collapseOperation" class="accordion-collapse collapse" aria-labelledby="headingOperation" data-bs-parent="#conversionAccordion">
                <div class="accordion-body">
                    <input type="number" class="form-control" id="binary1" placeholder="Masukkan bilangan biner pertama" pattern="[01]*" maxlength="20" oninput="validateBinaryInput(this)">
                    <input type="number" class="form-control mt-3" id="binary2" placeholder="Masukkan bilangan biner kedua" pattern="[01]*" maxlength="20" oninput="validateBinaryInput(this)">
                    
                    <select id="operation" class="form-select mt-3">
                        <option value="">Select operation</option>
                        <option value="add">+ (Pertambahan)</option>
                        <option value="subtract">- (Pengurangan)</option>
                        <option value="multiply">* (Perkalian)</option>
                        <option value="divide">/ (Pembagian)</option>
                    </select>
                    <button onclick="performOperation()" class="btn btn-primary mt-3">Hitung</button>
                    <div class="mt-3" id="resultOperation"></div>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingBinerNegative">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseBinerNegative" aria-expanded="false" aria-controls="collapseBinerNegative">
                    Konversi Biner Positif ke Biner Negatif
                </button>
            </h2>
            <div id="collapseBinerNegative" class="accordion-collapse collapse" aria-labelledby="headingBinerNegative" data-bs-parent="#conversionAccordion">
                <div class="accordion-body">
                    <input type="number" class="form-control" id="biner-to-n" placeholder="Masukkan bilangan biner" oninput="validateBinaryInput(this)">
                    <button onclick="convertToBinerNegative()" class="btn btn-primary mt-3">Konversi</button>
                    <div class="mt-3" id="resultToBinerNegative"></div>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingOperationNegative">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOperationNegative" aria-expanded="false" aria-controls="collapseOperationNegative">
                    Operasi Aritmatika Biner (berisi Biner Negatif)
                </button>
            </h2>
            <div id="collapseOperationNegative" class="accordion-collapse collapse" aria-labelledby="headingOperationNegative" data-bs-parent="#conversionAccordion">
                <div class="accordion-body">
                    <input type="number" class="form-control" id="biner-n-1" placeholder="Masukkan bilangan biner pertama" pattern="[01]*" maxlength="20" oninput="validateBinaryInput(this)">
                    <input type="number" class="form-control mt-3" id="biner-n-2" placeholder="Masukkan bilangan biner kedua" pattern="[01]*" maxlength="20" oninput="validateBinaryInput(this)">
                    
                    <select id="operation" class="form-select mt-3">
                        <option value="">Select operation</option>
                        <option value="add">+ (Pertambahan)</option>
                        <option value="subtract">- (Pengurangan)</option>
                        <option value="multiply">* (Perkalian)</option>
                        <option value="divide">/ (Pembagian)</option>
                    </select>
                    <button onclick="performOperation()" class="btn btn-primary mt-3">Hitung</button>
                    <div class="mt-3" id="resultOperation"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function validateBinaryInput(input) {
            input.value = input.value.replace(/[^01]/g, '');
        }

        function validateDecimalInput(input) {
            input.value = Math.max(0, parseInt(input.value, 10)).toString();
        }

        function convertBinaryToDecimal() {
            const binaryInput = document.getElementById('binaryInput').value;
            let resultDisplay = document.getElementById('resultBinaryToDecimal');
            resultDisplay.innerHTML = '';

            if (!binaryInput) {
                resultDisplay.innerHTML = "<p style='color:red;'>Please enter a binary number</p>";
                return;
            }

            resultDisplay.innerHTML = `<div class="card">
                                            <div class="card-header">Hasil</div>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">Desimal : <span class="fw-bold">${parseInt(binaryInput, 2)}</span></li>
                                            </ul>
                                        </div>`;
        }

        function convertDecimalToBinary() {
            const decimalInput = document.getElementById('decimalInput').value;
            let resultDisplay = document.getElementById('resultDecimalToBinary');
            resultDisplay.innerHTML = '';

            if (!decimalInput) {
                resultDisplay.innerHTML = "<p style='color:red;'>Please enter a decimal number</p>";
                return;
            }

            resultDisplay.innerHTML = `<div class="card">
                                            <div class="card-header">Hasil</div>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">Biner : <span class="fw-bold">${parseInt(decimalInput, 10).toString(2)}</span></li>
                                            </ul>
                                        </div>`;
        }

        function performOperation() {
            const binary1 = document.getElementById('binary1').value;
            const binary2 = document.getElementById('binary2').value;
            const operation = document.getElementById('operation').value;
            let resultDisplay = document.getElementById('resultOperation');
            resultDisplay.innerHTML = '';

            if (!binary1 || !binary2 || !operation) {
                resultDisplay.innerHTML = "<p style='color:red;'>Please enter both binary numbers and select an operation.</p>";
                return;
            }

            let result;
            switch (operation) {
                case 'add':
                    result = binaryAddition(binary1, binary2);
                    break;
                case 'subtract':
                    result = binarySubtraction(binary1, binary2);
                    break;
                case 'multiply':
                    result = binaryMultiplication(binary1, binary2);
                    break;
                case 'divide':
                    result = binaryDivision(binary1, binary2);
                    break;
                default:
                    result = 'Unknown operation';
            }

            resultDisplay.innerHTML = `<div class="card">
                                            <div class="card-header">Hasil</div>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">Biner : <span class="fw-bold">${result.biner}</span></li>
                                                <li class="list-group-item">Desimal : <span class="fw-bold">${result.decimal}</span></li>
                                            </ul>
                                        </div>`
        }

        function binaryAddition(a, b) {
            let result = (parseInt(a, 2) + parseInt(b, 2)).toString(2);
            return {biner : result, decimal: parseInt(result, 2)};
        }

        function binarySubtraction(a, b) {
            let result = (parseInt(a, 2) - parseInt(b, 2)).toString(2);
            return {biner : result, decimal: parseInt(result, 2)};
        }

        function binaryMultiplication(a, b) {
            let result = (parseInt(a, 2) * parseInt(b, 2)).toString(2);
            return {biner : result, decimal: parseInt(result, 2)};
        }

        function binaryDivision(a, b) {
            let quotient = Math.floor(parseInt(a, 2) / parseInt(b, 2)).toString(2);
            let remainder = (parseInt(a, 2) % parseInt(b, 2)).toString(2);
            return {biner : quotient + '; Sisa : ' + remainder, decimal: parseInt(quotient, 2) + '; Sisa : ' + parseInt(remainder, 2)};
        }

        function convertToBinerNegative() {
            const biner = document.getElementById('biner-to-n').value;
            let resultDisplay = document.getElementById('resultToBinerNegative');
            resultDisplay.innerHTML = '';

            if (!biner) {
                resultDisplay.innerHTML = "<p style='color:red;'>Please enter a binary number</p>";
                return;
            }

            let result = toComplement(biner);
            resultDisplay.innerHTML = `<div class="card">
                                            <div class="card-header">Hasil</div>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">Komplemen 1 : <span class="fw-bold">${result.one}</span></li>
                                                <li class="list-group-item">Komplemen 2 : <span class="fw-bold">${result.two}</span></li>
                                            </ul>
                                        </div>`;
        }

        function flip(a) {return (a == '0')? '1': '0';} 
        function toComplement(a) { 
            var n = a.length; 
            var i; 
            
            var ones, twos; 
            ones = twos = "";
            
            for (i = 0; i < n; i++) {
                ones += flip(a[i]); 
            }

            twos = ones; 
            twos = twos.split('') 
            for (i = n - 1; i >= 0; i--) { 
                if (ones[i] == '1') {
                    twos[i] = '0'; 
                } else { 
                    twos[i] = '1'; 
                    break; 
                } 
            } 
            twos = twos.join('') 
            if (i == -1) {
                twos = '1' + twos; 
            }
            
            return {one: ones, two: twos}
        } 
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
